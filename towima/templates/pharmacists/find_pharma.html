
{% extends 'base.html' %}
{% block title %}Find your local pharmacy{% endblock %}

{% block content %}
    <section class="container-fluid" style="padding-top: 50px;">
        <div class="row" style="margin-top: 30px;">
            <div class="col-md-4 col-sm-12 text-center">
               <h2>Find your local pharmacy</h2>
            </div>
            <div class="col-md-8 col-sm-12">
                <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v3.1.3/mapbox-gl-directions.js'></script>
                <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v3.1.3/mapbox-gl-directions.css' type='text/css' />
                <div id='map' style='width: 100%; height: 500px; border-radius: 20px;'></div>
                <script>
                mapboxgl.accessToken = 'pk.eyJ1IjoibWF4aW1lYW50b2luZTE5OTciLCJhIjoiY2pubTNmNmlrMWpvdjNxdGFsdGxxaXJlayJ9.0tDqrdUlSYEOqxMSiy7j3g';

                var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/streets-v10',
                center: [4.395907, 50.821190],
                zoom: 15

                });

                // Add zoom and rotation controls to the map.  
                map.addControl(new mapboxgl.NavigationControl());

                // Add geolocate control to the map.
                map.addControl(new mapboxgl.GeolocateControl({
                    positionOptions: {
                        enableHighAccuracy: true
                    },
                    trackUserLocation: true
                }));
                    
                map.addControl(new MapboxDirections({
                    accessToken: mapboxgl.accessToken}),
                               'top-left');
                
                map.addControl(new MapboxTraffic({
                    accessToken: mapboxgl.accessToken}));
                
                var geojson = {
                      type: 'FeatureCollection',
                      features: [{
                        type: 'Feature',
                        geometry: {
                          type: 'Point',
                          coordinates: [-77.032, 38.913]
                        },
                        properties: {
                          title: 'Mapbox',
                          description: 'Washington, D.C.'
                        }
                      },
                      {
                        type: 'Feature',
                        geometry: {
                          type: 'Point',
                          coordinates: [-122.414, 37.776]
                        },
                        properties: {
                          title: 'Mapbox',
                          description: 'San Francisco, California'
                        }
                      }]
                    };
                // add markers to map
                geojson.features.forEach(function(marker) {

                // create a HTML element for each feature
                var el = document.createElement('div');
                el.className = 'marker';

                  // make a marker for each feature and add to the map
                  new mapboxgl.Marker(el)
                  .setLngLat(marker.geometry.coordinates)
                  .addTo(map);
                });
                </script>
            </div>
        </div>
        <br><br><br><br>
    </section>
{% endblock %}